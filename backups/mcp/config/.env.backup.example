# Archivo de Variables de Entorno para Sistema de Backups MCP
# Copia este archivo como .env.backup y configura tus valores

# =============================================================================
# CONFIGURACIÓN DE SUPABASE
# =============================================================================

# Project Reference de Supabase (REQUERIDO)
# Obtén este valor desde tu dashboard de Supabase
SUPABASE_PROJECT_REF=piynzvpnurnvbrmkyneo

# URL del proyecto Supabase (opcional, se genera automáticamente)
SUPABASE_URL=https://piynzvpnurnvbrmkyneo.supabase.co

# Claves de API de Supabase (opcionales, se obtienen automáticamente via MCP)
# SUPABASE_ANON_KEY=tu_clave_anon_aqui
# SUPABASE_SERVICE_ROLE_KEY=tu_clave_service_role_aqui

# =============================================================================
# CONFIGURACIÓN DE BACKUPS
# =============================================================================

# Directorio base para backups (relativo al proyecto)
BACKUP_DIR=backups

# Prefijo para nombres de archivos de backup
BACKUP_PREFIX=valora_plus

# Nivel de compresión para archivos tar.gz (1-9, donde 9 es máxima compresión)
COMPRESSION_LEVEL=6

# Retención de backups (días)
BACKUP_RETENTION_DAYS=30

# Número máximo de backups a mantener
MAX_BACKUP_COUNT=50

# =============================================================================
# CONFIGURACIÓN DE LOGGING
# =============================================================================

# Nivel de logging (debug, info, warn, error)
LOG_LEVEL=info

# Archivo de log (opcional)
LOG_FILE=backups/backup.log

# Habilitar logging detallado
VERBOSE_LOGGING=false

# =============================================================================
# CONFIGURACIÓN DE NOTIFICACIONES
# =============================================================================

# Habilitar notificaciones por email
ENABLE_EMAIL_NOTIFICATIONS=false

# Configuración SMTP (si las notificaciones están habilitadas)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=tu_email@gmail.com
SMTP_PASS=tu_password_de_aplicacion

# Destinatarios de notificaciones (separados por coma)
NOTIFICATION_RECIPIENTS=admin@tudominio.com,backup@tudominio.com

# =============================================================================
# CONFIGURACIÓN DE ALMACENAMIENTO EN LA NUBE (OPCIONAL)
# =============================================================================

# AWS S3
AWS_ACCESS_KEY_ID=tu_access_key
AWS_SECRET_ACCESS_KEY=tu_secret_key
AWS_REGION=us-east-1
AWS_S3_BUCKET=tu-bucket-de-backups

# Google Cloud Storage
GOOGLE_CLOUD_PROJECT_ID=tu-proyecto-gcs
GOOGLE_CLOUD_KEYFILE=path/to/service-account.json
GCS_BUCKET=tu-bucket-de-backups

# =============================================================================
# CONFIGURACIÓN DE SEGURIDAD
# =============================================================================

# Habilitar encriptación de backups
ENABLE_ENCRYPTION=false

# Clave de encriptación (usar openssl rand -base64 32)
ENCRYPTION_KEY=tu_clave_de_encriptacion_base64

# Algoritmo de encriptación
ENCRYPTION_ALGORITHM=aes-256-cbc

# =============================================================================
# CONFIGURACIÓN DE PROGRAMACIÓN
# =============================================================================

# Zona horaria para cron jobs
TIMEZONE=America/Mexico_City

# Habilitar programación automática
ENABLE_SCHEDULING=true

# Usuario para cron jobs (opcional, usa el usuario actual por defecto)
CRON_USER=

# =============================================================================
# CONFIGURACIÓN DE DESARROLLO
# =============================================================================

# Modo de desarrollo (habilita logging adicional)
DEVELOPMENT_MODE=false

# Simular operaciones sin ejecutarlas realmente
DRY_RUN=false

# Directorio temporal para operaciones
TEMP_DIR=/tmp/valora-plus-backups

# =============================================================================
# CONFIGURACIÓN DE MONITOREO
# =============================================================================

# Habilitar métricas de rendimiento
ENABLE_METRICS=false

# Endpoint para enviar métricas
METRICS_ENDPOINT=http://localhost:3000/metrics

# Intervalo de reporte de métricas (segundos)
METRICS_INTERVAL=300

# =============================================================================
# CONFIGURACIÓN AVANZADA
# =============================================================================

# Timeout para operaciones de base de datos (segundos)
DB_TIMEOUT=300

# Número máximo de reintentos para operaciones fallidas
MAX_RETRIES=3

# Intervalo entre reintentos (segundos)
RETRY_INTERVAL=5

# Tamaño máximo de archivo de backup antes de dividir (MB)
MAX_FILE_SIZE=1000

# Habilitar verificación de integridad post-backup
ENABLE_INTEGRITY_CHECK=true

# =============================================================================
# NOTAS DE CONFIGURACIÓN
# =============================================================================

# 1. Las variables marcadas como REQUERIDO deben ser configuradas
# 2. Las variables opcionales tienen valores por defecto razonables
# 3. Para producción, considera habilitar encriptación y notificaciones
# 4. Revisa los permisos de archivo para proteger información sensible
# 5. Usa .env.backup para tu configuración local (no commitear al repo)

# =============================================================================
# COMANDOS ÚTILES
# =============================================================================

# Generar clave de encriptación:
# openssl rand -base64 32

# Verificar configuración:
# node backups/mcp/scripts/mcp-backup.cjs --check-config

# Probar notificaciones
# node backups/mcp/scripts/backup-scheduler.cjs test-notification

# Validar variables de entorno
# node backups/mcp/scripts/backup-utils.cjs validate-env